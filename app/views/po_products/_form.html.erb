<P><%= render "validation_errors", object: @po_product%><P>

<div class="panel panel-default panel-top-margin">
	<div class="panel-heading">
		<h2><%= @po.po_number %></h2>
		<p style="float:left"><%= link_to 'Edit Po Number', edit_po_path(id: @po.id)%></p>
		<p><%= @po.date.strftime("%m-%d-%y") %></p>

		<%= smart_form(@po_product, params[:controller]) do |f| %>
			<%= f.hidden_field :po_id, value: @po.id %>

			<div class="row row-form">
				<div class="col-sm-2">
					<%= f.label :product_id, "Product", class: "control-label" %>
				</div>
				<div class="col-sm-10">
					<%= f.select :product_id, Product.all.collect {|t| [t.item_number, t.id]}, {prompt: "Select Product"} , class: "form-control" %>
				</div>
			</div>
			<div class="row row-form">
				<div class="col-sm-2">
					<%= f.label :quantity, class: "control-label" %>
				</div>
				<div class="col-sm-10">
					<%= f.text_field :quantity, class: "form-control" %>
				</div>
			</div>
			<div class="row row-form">
				<div class="col-sm-offset-2 col-sm-10">
					<%= f.submit "Add", class: "btn btn-default" %>
				</div>
			</div>

		<% end %>
	</div>
	<div class="panel-body">
		<table class="table table-striped table-condensed">
			<thead>
				<tr>
					<th>Item Number</th>
					<th>Quantity</th>
					<th>Created at</th>
					<th>Action</th>
				</tr>
			</thead>
			<tbody>
				<% @po_products.each do |po_product| %>
					<tr>
						<td><%=po_product.product.item_number%></td>
						<td><%=po_product.quantity%></td>
						<td><%=po_product.created_at.strftime("%Y-%m-%d")%></td>
						<td>
							<%= link_to 'Delete', po_product_path(id: po_product.id), method: :delete, data: {confirm: "Are you sure?"} %>
						</td>
					</tr>
				<% end %>
			</tbody>
		</table>
	</div>

	<div class="panel-footer text-right">
		<p><%= link_to 'Finish', po_path(id: @po.id), method: :get, class: "btn btn-default"%></p>
	</div>
</div>