<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>NcSTAR Tactical</title>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  
  <%= csrf_meta_tags %>
</head>

<body>

<!-- notification flash -->
<% if flash[:notice] %>
  <div id="notice_wrapper">
    <div  class = "alert alert-success"><%= flash[:notice] %></div>
  </div>
<% elsif flash[:alert] %>
  <div id="notice_wrapper">
    <p class="alert alert-danger"><%= flash[:alert] %></p>
  </div>
<% end %>

<%= render 'layouts/nav_bar' %>

  <!-- Main body -->
<div class="container"> 
  <%= yield %>
  <!-- Footer -->
</div> 


<script>
  $(document).ready(function() {
    setTimeout(function() {
      $("#notice_wrapper").stop(true, true)
        .animate({
            height:"toggle",
            opacity:"toggle"
        }).fadeOut('slow', function() {
        $(this).remove();
      })
    }, 2000);

    $("#login-link").click(function () {      
      $("#login-panel").fadeToggle(500)
    });

    $("#nav-search-icon").click(function (){
      $(this).hide(500);
      $("#nav-search").show(500); 
    });

    $('body').click(function(e) {
      if (e.target.id == "nav-search-icon" || e.target.id == "nav-search-input" || e.target.id == "nav-search-button"){
        } else {
        $("#nav-search").hide(500);
        $("#nav-search-icon").show(500); 
      }
    });

    // filter bar toggle
    $('#left-arrow').click(function (e) {
      e.stopPropagation();
      $('#filter-bar').show(1000);
      $(this).hide();
      $('#right-arrow').show();
    });
    $('#right-arrow').click(function (e) {
      e.stopPropagation();
      $('#filter-bar').hide(1000);
      $(this).hide();
      $('#left-arrow').show();
    });

    // Change navbar when scroll down
    $(window).scroll(function () {
      var top = $(this).scrollTop();
      if(top>400) {
        $("#top-navbar-white").removeClass("navbar-full navbar-default navbar-normal");
        $("#top-navbar-white").addClass("navbar-full navbar-inverse");
        $("#black-logo").hide();
        $("#white-logo").show();
      }
      if(top<=400) {
        $("#top-navbar-white").addClass("navbar-full navbar-default navbar-normal");
        $("#top-navbar-white").removeClass("navbar-full navbar-inverse");
        $("#black-logo").show();
        $("#white-logo").hide();
      }
    })
  });
</script>


</body>
</html>
