<div class="container">

<h1>Products</h1><br/>
<div class="row">
	<div class="col-xs-12 col-md-4">
		<form class="products" id="products" action="/products">
			<div class="input-group">
			  <input id="nav-search-input" type="text" class="form-control nav-search-input" name="query" id="query" placeholder="Item Number" >
			  <span class="input-group-addon nav-search-addon btn-default">
			      <button type="submit" class="home-search-button ">
			          <span class="glyphicon glyphicon-search" aria-hidden="true" ></span>
			      </button>  
			  </span>
			</div>
		</form>
	</div>
</div><br/>

<div class="text-right">
	<%= link_to "New Product", new_product_path if current_user.role != 'user'%>
</div>
<hr class="hr-table">
<div class="table-responsive">
	<table class="table table-striped table-condensed">
		<thead>
			<tr>
				<th><%= sortable "item_number", "Item Number" %></th>
				<th>Unit Cost</th>
				<th>Tolling Cost</th>
				<th>Description</th>
				<th>Project</th>
				<th><%= sortable "created_at", "Created at" %></th>
				<th><%= "Action" if current_user.role =="admin"%></th>
			</tr>
		</thead>
		<tbody>
			<% @products.each do |product| %>
				<tr>
					<td><%= link_to product.item_number,  product_path(product), method: :get%></td>
					<td><%= number_to_currency(product.cost.unitUSD) if product.cost.present? %></td>
					<td><%= number_to_currency(product.cost.toolingUSD)  if product.cost.present? %></td>
					<td><%= product.product_name %></td>
					<td><%= link_to product.project.project_name, controller: "projects", action: "show", id: product.project_id %></td>
					<td><%= product.created_at.strftime("%b %d. %y") %></td>
					<td>
						<%= link_to 'Edit', edit_product_path(product) if current_user.role =="admin" %>
						<%= link_to 'Delete', product_path(product), method: :delete, data: {confirm: "Are you sure?"}  if current_user.role =="admin" %>
					</td>
				</tr>			
			<% end %>			
		</tbody>
	</table>
</div>

</div>
